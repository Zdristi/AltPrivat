# Telegram Bot для продажи доступа к каналу

Этот бот позволяет пользователям покупать доступ к приватному Telegram каналу через внутренние платежи Telegram или криптоплатежи через CryptoBot.

## Функциональность

- Пользователи могут купить подписку на канал через внутренние платежи Telegram или криптоплатежи
- Автоматическое отслеживание статуса подписки
- Проверка активной подписки перед покупкой
- Хранение данных о подписке в SQLite базе данных

## Установка

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

2. Настройте переменные окружения:
   - `TELEGRAM_BOT_TOKEN` - токен вашего Telegram бота (получите от @BotFather)
   - `PAYMENT_PROVIDER_TOKEN` - токен платежного провайдера (получите у @BotFather при настройке платежей) для оплаты в рублях
   - `CRYPTO_BOT_TOKEN` - токен от CryptoBot (получите @CryptoBot)
   - `CHANNEL_ID` - ID или имя вашего приватного канала (например, @your_channel)

3. Запустите бота:
   - Для оплаты рублями: `python bot.py`
   - Для оплаты криптовалютой: `python cryptobot.py`

## Настройка платежей

### Для оплаты в рублях:
1. Обратитесь к @BotFather и включите платежи для вашего бота
2. Получите токен платежного провайдера от BotFather
3. Настройте приватный канал и убедитесь, что бот имеет права администратора для приглашения пользователей

### Для криптоплатежей:
1. Получите токен у @CryptoBot
2. Настройте приватный канал и убедитесь, что бот имеет права администратора

## Структура базы данных

Бот использует SQLite базу данных (users.db) с одной таблицей:

```sql
users (
  user_id INTEGER PRIMARY KEY,
  subscription_expires DATE,
  is_subscribed BOOLEAN DEFAULT 0
)
```

## Безопасность

- Не храните токены в коде - используйте переменные окружения
- Проверяйте права доступа к каналу
- Регулярно обновляйте зависимости